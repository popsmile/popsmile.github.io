---
layout: post
title:  "TIL: 2019.01.29"
date:   2019-01-29 23:59:59
author: Jamie
categories: TIL
tags: MVVM UIImageView Simulator
cover:  "/assets/cover/book-with-magnifier.jpeg"
---

## MVVM

ì¹´ë“œê²Œì„ ì•±ì—ì„œ ì¹´ë“œ ê°ì²´ì˜ ëª¨ë¸ê³¼ ë·°ë¥¼ ë¶„ë¦¬í•œ ìƒíƒœì—ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ì£¼ê³  ì‹¶ì–´ **View Model**ì„ ì¤‘ê°„ì—­í• ë¡œ ìƒì„±í–ˆë‹¤.  `Card` --< `CardViewModel` --< `CardView` ê´€ê³„ë¡œ ìƒì„±í•´ì£¼ì—ˆë‹¤. 

```swift
protocol CardViewModelDelegate {
    init(card: Card)
    var imageName: String? { get }
    var imageDidChange: ((CardViewModelDelegate) -> ())? { get set }
    func flip()
}

class CardViewModel: CardViewModelDelegate {
    private let card: Card

    required init(card: Card) {
        self.card = card
    }

    var imageName: String? {
        didSet {
            imageDidChange?(self)
        }
    }

    var imageDidChange: ((CardViewModelDelegate) -> ())?

    func flip() {
        card.flip()
        imageName = card.imageName
    }

}
```

`CardViewModel` í´ë˜ìŠ¤ëŠ” `Card` ëª¨ë¸ ê°ì²´ë¥¼ ì†Œìœ í•˜ê³  ìˆë‹¤. ì´ ë·° ëª¨ë¸ì€ ì•„ë˜ì²˜ëŸ¼ `CardView` ê°€ ì†Œìœ í•˜ê³  ìˆë‹¤. ì´ ë•Œ ë‚˜ë¦„ OCP ì›ì¹™ì„ ì§€ì¼œë³´ê³ ì, ë·° ë‚´ë¶€ì— ë·° ëª¨ë¸ë„ `CardViewModelDelegate` íƒ€ì…ì„ ë°›ë„ë¡ êµ¬í˜„í–ˆë‹¤. 

ë·° ëª¨ë¸ì´ flipë˜ë©´, ë·° ëª¨ë¸ì˜ imageNameì´ ì¹´ë“œ ê°ì²´ì˜ imageNameìœ¼ë¡œ ë°˜ì˜ëœë‹¤. ê·¸ë¦¬ê³  ë·° ëª¨ë¸ì˜ imageNameì´ didSetë˜ë©´ ì•„ë˜ì—ì„œ ì§€ì •í•´ì¤€ í´ë¡œì €ê°€ í˜¸ì¶œë˜ê³ , ì´ í´ë¡œì €ëŠ” ì¹´ë“œ ë·°ì˜ ì´ë¯¸ì§€ë¥¼ ë³€ê²½í•´ì¤€ë‹¤!

```swift
class CardView: UIImageView {

    var viewModel: CardViewModelDelegate! {
        didSet {
            viewModel.imageDidChange = { [unowned self] viewModel in
                self.setImage(named: viewModel.imageName)
            }
        }
    }

    ...
    
    func flip() {
        viewModel.flip()
    }

}
```

ìš”ê·¼ë˜ ê³„ì†í•´ì„œ ì•„í‚¤í…ì²˜ì— ëŒ€í•´ì„œ ê³µë¶€í•˜ê³  ì•Œì•„ë³´ì•˜ëŠ”ë°, ì½”ë“œìŠ¤ì¿¼ë“œ ë¶„ë“¤ì´ í•´ì£¼ì‹  ì¡°ì–¸ì„ ì°¸ê³ í•´ì„œ ìš°ì„ ì€ **ë·°ë¥¼ ê·¸ë¦¬ëŠ” ë¡œì§**ê³¼ **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**ì„ ë¶„ë¦¬í•´ì„œ êµ¬í˜„í•˜ëŠ” ì—°ìŠµì— ì „ë…í•´ì•¼ê² ë‹¤..!! ì˜¤ëŠ˜ í•˜ë£¨ ë¨¸ë¦¬ë¥¼ ì‹¸ë§¤ê³  ì–»ì–´ë‚¸ êµ¬í˜„ë°©ë²•ì¸ë°, ì–´ë–¤ í”¼ë“œë°±ì„ ë°›ì„ì§€ëŠ” ì˜ ëª¨ë¥´ê² ë‹¤..ã…ã… ì˜¤ëŠ˜ì€ ì´ [í¬ìŠ¤íŠ¸](https://blog.canapio.com/43)ë¥¼ êµ‰ì¥íˆ ë§ì´ ì°¸ê³ í•´ì„œ ê³µë¶€í–ˆë‹¤.

<br>

## UIImageView

`UIView` ë¥¼ ìƒì†ë°›ì•„ êµ¬í˜„í–ˆë˜ `CardStackView` ì— ì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ì‚¬í•­ì´ ìƒê²¨ì„œ, `UIImageView` ë¥¼ ìƒì†ë°›ë„ë¡ ìˆ˜ì •í–ˆë‹¤. ê·¸ëŸ°ë°, ê°‘ìê¸°... ê¸°ì¡´ì˜ í„°ì¹˜ì´ë²¤íŠ¸ê°€ ì‘ë™í•˜ì§€ ì•Šì•˜ë‹¤. ğŸ˜± ë­ì§€ ì‹¶ì—ˆì§€ë§Œ, ì°¨ë¶„íˆ ê³µì‹ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ê³  êµ¬ê¸€ë§ë„ í•´ë³´ì•˜ë‹¤. ë‹¤í–‰íˆ ì›ì¸ì„ ë°œê²¬í–ˆë‹¤! ë°”ë¡œ ì´ê²ƒ.

```swift
var isUserInteractionEnabled: Bool { get set }
```

ì›ë˜ `UIView` ì—ì„œëŠ” ë””í´íŠ¸ê°€ **True** ì¸ë°, `UIImageView` ë¡œ ë„˜ì–´ì˜¤ë©´ ì´ í”„ë¡œí¼í‹°ê°€ **False** ë¡œ ë°”ë€ë‹¤ê³  í•œë‹¤. [ê³µì‹ë¬¸ì„œ](https://developer.apple.com/documentation/uikit/uiimageview) ì„¤ëª…ì„ ì°¸ê³ í•˜ë©´, ì´ë¯¸ì§€ ë·°ëŠ” ë³´í†µ ì‹œê°ì ì¸ ì»¨í…ì¸ ë¡œë§Œ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ì´ë²¤íŠ¸ë¥¼ ë¬´ì‹œí•˜ëŠ”ê²Œ ê¸°ë³¸ ì„¤ì •ì´ë¼ê³  í•œë‹¤.

Image views ignore user events by default. Normally, you use image views only to present visual content in your interface. If you want an image view to handle user interactions as well, change the value of its [isUserInteractionEnabled](https://developer.apple.com/documentation/uikit/uiimageview/1621063-isuserinteractionenabled) property to `true`. 

ì´ ì¹´ë“œê²Œì„ ì•±ì—ì„œëŠ” ì´ë¯¸ì§€ ë·°ì— í„°ì¹˜ì´ë²¤íŠ¸ê°€ ì „í•´ì ¸ì•¼í•˜ë¯€ë¡œ Trueë¡œ ë³€ê²½í•´ì£¼ì—ˆë‹¤.

<br>

 ## Simulator ì—ëŸ¬

```swift
// Simulator
Unable to boot device due to insufficient system resources
```

Xcodeì™€ Simulatorë¥¼ ì—´ì‹¬íˆ ëŒë¦¬ë‹¤ê°€, ìê¾¸ Xcodeê°€ ê³„ì† êº¼ì§€ë”ë‹ˆ ì´ë ‡ê²Œ Simulator ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤. [ìŠ¤íƒì˜¤ë²„í”Œë¡œìš° ê¸€](https://stackoverflow.com/questions/46673050/unable-to-boot-device-due-to-insufficient-system-resources-using-xcode-9) ì„ ì°¸ê³ í•´ì„œ ì•„ë˜ ê°™ì´ í•´ê²°í–ˆë‹¤. ì‹œìŠ¤í…œ ì‹¤í–‰ í”„ë¡œì„¸ìŠ¤ ì œí•œì„ ëŠ˜ë ¤ì£¼ë©´ ëœë‹¤. ì´ ë³€ê²½ì‚¬í•­ì€ ì¬ë¶€íŒ…í•˜ê¸° ì „ê¹Œì§€ ì ìš©ëœë‹¤ê³ í•œë‹¤. ì•„ë˜ì²˜ëŸ¼ ì œí•œì„ ëŠ˜ë¦¬ë©´, ì‹œìŠ¤í…œì´ ëŠë ¤ì§€ê³  ìš´ì˜ì²´ì œê°€ ë¶ˆì•ˆì •í•´ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì„ ê°ì•ˆí•´ì•¼í•œë‹¤ê³  í•œë‹¤.

```shell
// Terminal
sudo launchctl limit maxproc 2000 2500
```

